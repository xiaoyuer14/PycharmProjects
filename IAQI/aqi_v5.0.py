"""	功能：AQI计算	日期：24/01/2019	版本： 5.0	网络爬虫爬取实时数据	requests模块		是一个简洁且简单的处理http请求的工具		支持丰富的链接访问功能，包括url获取，http会话，cookie记录等		requests网页请求：		get()               对应的HTTP的GET方式		post()              对应HTTP的POST方式，用于传递用户数据		request对象属性：		status_code         HTTP请求的返回状态码		text                HTTP相应内容的字符串形式，即url对应的网页内容"""import requestsdef get_html_text(url):	"""		返回url的文本	"""	r = requests.get(url, timeout=30)	print(r.status_code)	return r.textdef main():	city_pinyin = ""	while city_pinyin != "exit":		city_pinyin = input('请输入城市拼音,输入exit退出：')		if city_pinyin == 'exit':			break		url = 'http://pm25.in/' + city_pinyin		url_text = get_html_text(url)		aqi_div = '''    <div class="span12 data">        <div class="span1">          <div class="value">            '''		aqi_div_end = '''          </div>          <div class="caption">            AQI          </div>'''		pm25_1h_div = '''<div class="caption">            AQI          </div>        </div>        <div class="span1">          <div class="value">            '''		pm25_1h_div_end = '''          </div>          <div class="caption">            PM2.5/1h          </div>'''		city_div = '''  <div class="span12 avg">    <div class="span11">      <div class="city_name">          <h2>'''		city_div_end = '''</h2>      </div> <!-- end of .city_name -->'''		level_div = '''<div class="level">          <h4>            '''		level_div_end = '''          </h4>      </div> <!-- end of .level -->    </div>'''		index_aqi = url_text.find(aqi_div)		begin_index_aqi = index_aqi + len(aqi_div)		end_index_aqi = url_text.find(aqi_div_end)		aqi_val = url_text[begin_index_aqi: end_index_aqi]		index_pm25_1h = url_text.find(pm25_1h_div)		begin_index_pm25_1h = index_pm25_1h + len(pm25_1h_div)		end_index_pm25_1h = url_text.find(pm25_1h_div_end)		pm25_1h_val = url_text[begin_index_pm25_1h: end_index_pm25_1h]		index_city = url_text.find(city_div)		beigin_index_city = index_city + len(city_div)		end_index_city = url_text.find(city_div_end)		city_val = url_text[beigin_index_city: end_index_city]		index_level = url_text.find(level_div)		beigin_index_level = index_level + len(level_div)		end_index_level = url_text.find(level_div_end)		level_val = url_text[beigin_index_level: end_index_level]		print("****************** begin ******************")		print('城市： {}'.format(city_val))		print(' 空气质量AQI为:  {}'.format(aqi_val))		print('    PM2.5/1h为:  {}'.format(pm25_1h_val))		print('空气质量级别为:  {}'.format(level_val))		print("******************  end  ******************")		print()	print("感谢使用，再见！")if __name__ == '__main__':	main()